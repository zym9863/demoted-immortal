import{_ as w,f as N,c as n,a as e,t as l,F as x,r as g,j as f,o as a,l as P,m as C,g as h,d as k,w as y,u as b,R as I,n as D,e as $}from"./index-a1MyF7Au.js";import{p as m}from"./poems-Bd695-Hc.js";const V={class:"poem-detail"},R={class:"poem-header"},B={class:"poem-title"},T={class:"poem-meta"},j={class:"poem-author"},F={class:"poem-dynasty"},L={class:"poem-tags"},q={class:"poem-content-container"},E={class:"poem-content"},O={class:"line-text"},S={key:0,class:"line-note"},z={class:"note-text"},A={class:"notes-toggle"},G={class:"poem-sections"},H={class:"poem-section background"},J={class:"poem-section appreciation"},K={__name:"PoemDetail",props:{poem:{type:Object,required:!0}},setup(c){const u=c,r=N(!0),p=()=>{r.value=!r.value},_=()=>!u.poem||!u.poem.content?[]:u.poem.content.split(`
`).map(t=>{var d;const o=(d=u.poem.notes)==null?void 0:d.find(s=>s.line===t);return{text:t,note:(o==null?void 0:o.note)||null}});return(v,t)=>(a(),n("div",V,[e("div",R,[e("h1",B,l(c.poem.title),1),e("div",T,[e("span",j,l(c.poem.author),1),e("span",F,l(c.poem.dynasty),1)]),e("div",L,[(a(!0),n(x,null,g(c.poem.tags,(o,d)=>(a(),n("span",{key:d,class:"tag"},l(o),1))),128))])]),e("div",q,[e("div",E,[(a(!0),n(x,null,g(_(),(o,d)=>(a(),n("div",{key:d,class:"poem-line"},[e("p",O,l(o.text),1),r.value&&o.note?(a(),n("div",S,[t[0]||(t[0]=e("span",{class:"note-icon"},"注",-1)),e("span",z,l(o.note),1)])):f("",!0)]))),128))]),e("div",A,[e("button",{onClick:p},l(r.value?"隐藏注释":"显示注释"),1)])]),e("div",G,[e("div",H,[t[1]||(t[1]=e("h2",null,"创作背景",-1)),e("p",null,l(c.poem.background),1)]),e("div",J,[t[2]||(t[2]=e("h2",null,"鉴赏",-1)),e("p",null,l(c.poem.appreciation),1)])])]))}},M=w(K,[["__scopeId","data-v-5b777118"]]),Q={class:"poem-detail-view"},U={key:0,class:"poem-container"},W={class:"navigation-links"},X={class:"prev-next-links"},Y={key:1,class:"not-found"},Z={__name:"PoemDetailView",setup(c){const u=P(),r=D(),p=N(parseInt(u.params.id));C(()=>u.params.id,s=>{p.value=parseInt(s)});const _=h(()=>m.find(s=>s.id===p.value)),v=h(()=>{const s=m.findIndex(i=>i.id===p.value);return s>0?m[s-1].id:null}),t=h(()=>{const s=m.findIndex(i=>i.id===p.value);return s<m.length-1?m[s+1].id:null}),o=()=>{v.value&&r.push(`/poems/${v.value}`)},d=()=>{t.value&&r.push(`/poems/${t.value}`)};return(s,i)=>(a(),n("div",Q,[_.value?(a(),n("div",U,[e("div",W,[k(b(I),{to:"/poems",class:"back-link"},{default:y(()=>i[0]||(i[0]=[$("返回诗词列表")])),_:1,__:[0]}),e("div",X,[v.value?(a(),n("button",{key:0,onClick:o,class:"nav-link"}," 上一首 ")):f("",!0),t.value?(a(),n("button",{key:1,onClick:d,class:"nav-link"}," 下一首 ")):f("",!0)])]),k(M,{poem:_.value},null,8,["poem"])])):(a(),n("div",Y,[i[2]||(i[2]=e("h2",null,"未找到诗词",-1)),e("p",null,"抱歉，未找到ID为 "+l(p.value)+" 的诗词。",1),k(b(I),{to:"/poems",class:"back-link"},{default:y(()=>i[1]||(i[1]=[$("返回诗词列表")])),_:1,__:[1]})]))]))}},se=w(Z,[["__scopeId","data-v-9edf54b5"]]);export{se as default};
